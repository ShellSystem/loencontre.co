language: php

php:
  - 5.6

branches:
  only:
  - master
  - development


before_script:
  - php SourceBackend/laravel/artisan key:generate # Porque genera error con un Key
  - mysql -e 'create database goodfirm_entregas;'
  - mysql goodfirm_entregas < goodfirm_entregas.sql
  #- mysql -u root -e "CREATE USER 'goodfirm_usuario'@'localhost' IDENTIFIED BY ',eE_qW$Sh5KR';"
  #- mysql -u root -e "GRANT ALL PRIVILEGES ON \`goodfirm_entregas\`.* TO goodfirm_usuario@localhost IDENTIFIED BY ',eE_qW$Sh5KR';"
  #- mysql -u root -e "FLUSH PRIVILEGES;"

script:
- SourceBackend/laravel/vendor/bin/phpunit SourceBackend/laravel/tests/UnitTest
- SourceBackend/laravel/vendor/bin/phpunit SourceBackend/laravel/tests/IntegrationTest

after_success:
  #- git clone https://github.com/entregascontinuas/loencontre.co.git
  #- cd loencontre.co
  #- git config --global user.email "entregascontinuas@gmail.com"
  #- git config --global user.name "entregascontinuas"
  #- git checkout development 
  #- git merge origin/travis-integration -m "IntegraciÃ³n desde Travis CI"
  #- git remote set-url origin https://entregascontinuas:entregascontinuas1@github.com/entregascontinuas/loencontre.co.git
  #- git push origin development

